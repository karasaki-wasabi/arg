# ストーリー

## シーケンス

### 1. 導入

- 表：アーカイブ復旧プロジェクトの実施
  - 学内の研究室のサイトを復旧してほしい
- 裏: 未来にタイムスリップする
  - これは徐々に判明していく

### 2. フェーズ1 (recovery data)

- 表: ユーザーには、次の作業を行ってもらう
  - サイト内探索
    - 世界観の把握
  - 壊れた・喪失したデータの復旧
    - { TODO }
- 裏: これは、壊れたタイムマシンデータの復旧作業ということになる

### 3. フェーズ2 (establish channel)

- 表: ユーザーには、次の2つの作業を行ってもらう
  - 時刻整合
    - 対象ページの「更新日・時刻」を所定フォーマットに統一
    - 指示された複数ページを所定の組合せに揃える
  - リンク修正
    - リンク切れページを修正し、必要に応じて出典URLを補完
- 裏: これは、未来との通信路を確立するために必要な作業ということになる
  - 時刻整合: 未来との時刻の同期を行い、チャネルの位相が一致する
  - リンク修正: 往復確認の一連の操作が ping/pong のハンドシェイクとなり、ACK が揃うことで通信路が確立される。

### 4. フェーズ3 (execute system)

- 表: 作業ポータル上で以下を案内・実施してもらう
  - 表示文言: 「ページの内容をAIが要約するので、要約するページを教えてください。」
  - 対象選択: フェーズ1/2で扱った「3つの対象ページ」を選択（例: m-001, m-0xx, m-0yy）
  - 各ページのUIが自動提示する3要素をコピペ
    - ページID（例: m-001）
    - 更新時刻の「分」2桁（時刻整合で確定した分）
    - 往復確認の結果（OK固定想定）
  - 規則に従ってキーワードを整形（サイトマップ順）
    - 形式例: m-00124OK-m-0xx05OK-m-0yy52OK
    - = [ID1][mm1][OK1]-[ID2][mm2][OK2]-[ID3][mm3][OK3]
  - ポータルの「最終確認 → 起動」欄にキーワードを入力して実行
- 裏: タイムマシン起動のための最終検証
  - mm列は時刻同期ウィンドウの再提示でチャネル位相一致を最終確認
  - OK列は簡易チェックサム（ACK整合）
  - ID列はルーティング指定となり、検証通過で起動トークンが有効化
- 完了: 「SIGNATURE VERIFIED」「EXECUTE ENABLED」→ カウントダウン表示 → 起動（帰還完了）

### 5. 真相の開示とエピローグ

- 主人公はもともと未来から来た人物
  - 依頼者は未来の自分である
- 過去に行った理由
  - 雨宮研究室に蓄積された「時刻同期／通信チャネル理論」は時間遡行技術の土台であり、未来ではサーバ移行と制度変更で一次資料が失われ再現不能になりつつあった
  - 消失前の過去に戻り、サイト群を最小限の正確さで復旧・転送設定・公開範囲の再設定を行い、検証に必要な参照情報と改ざん防止の痕跡（更新履歴・署名）を残すことが必須だった
  - これにより研究の系譜が断絶せず、タイムマシン成立条件（理論の連続性）が回復。主人公は帰還後、その痕跡を確認し、小さな「往復完了」の表示を見届けて物語が閉じる

